<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Testing pickers</title>

	<!-- Just a basic CSS for the test page -->
	<link rel="stylesheet" type="text/css" href="../dist/styles/smart-picker.css">

	<!-- Just a basic CSS for the test page -->
	<link rel="stylesheet" type="text/css" href="test.css">

	<!-- Personalized CSS for the picker-->
	<link rel="stylesheet" type="text/css" href="smart-picker.css">

	<script type="text/javascript" src="../vendor/jquery.min.js"></script>
	<script type="text/javascript" src="../vendor/underscore.min.js"></script>
	<script type="text/javascript" src="../dist/smart-picker.js"></script>

	<script src="http://d3js.org/d3.v3.js" charset="UTF-8"></script>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
<body>

	<h1>Test #5 - World Map</h1>

	<h2>Color the map based on picker</h2>
	<p>Click on the button below to select countries. In this example, we can clearly see the difference between onInteraction and onSet</p>
	<p><button class="button" id="button1">Select Countries</button> <button class="button" id="button2">Select 5</button></p>

	<div id="map">
	    <svg width="100%" height="450px"></svg>
	</div>

	<script>

		var picker = new smartPicker("mult", "my-geo-mult", {
			width: 500,
			clickOverlay: false,
			draggable: true,
			initialValue: ['BRA', 'USA'],
			confirmButton: "Select these countries",
			contentData: {
				text: "Select countries",
				options: [
					{value: "AFG", name: "Afghanistan"},
			        {value: "ALB", name: "Albania"},
			        {value: "DZA", name: "Algeria"},
			        {value: "AGO", name: "Angola"},
			        {value: "ARG", name: "Argentina"},
			        {value: "ARM", name: "Armenia"},
			        {value: "AUS", name: "Australia"},
			        {value: "AUT", name: "Austria"},
			        {value: "AZE", name: "Azerbaijan"},
			        {value: "BHS", name: "Bahamas"},
			        {value: "BGD", name: "Bangladesh"},
			        {value: "BRB", name: "Barbados"},
			        {value: "BLR", name: "Belarus"},
			        {value: "BEL", name: "Belgium"},
			        {value: "BEN", name: "Benin"},
			        {value: "BOL", name: "Bolivia"},
			        {value: "BWA", name: "Botswana"},
			        {value: "BRA", name: "Brazil"},
			        {value: "BGR", name: "Bulgaria"},
			        {value: "BFA", name: "Burkina Faso"},
			        {value: "BDI", name: "Burundi"},
			        {value: "KHM", name: "Cambodia"},
			        {value: "CMR", name: "Cameroon"},
			        {value: "CAN", name: "Canada"},
			        {value: "CAF", name: "Central African Republic"},
			        {value: "TCD", name: "Chad"},
			        {value: "CHL", name: "Chile"},
			        {value: "CHN", name: "China"},
			        {value: "COL", name: "Colombia"},
			        {value: "COM", name: "Comoros"},
			        {value: "COD", name: "Congo [DRC]"},
			        {value: "COG", name: "Congo [Republic]"},
			        {value: "CRI", name: "Costa Rica"},
			        {value: "HRV", name: "Croatia"},
			        {value: "CUB", name: "Cuba"},
			        {value: "CZE", name: "Czech Republic"},
			        {value: "DNK", name: "Denmark"},
			        {value: "DJI", name: "Djibouti"},
			        {value: "DOM", name: "Dominican Republic"},
			        {value: "ECU", name: "Ecuador"},
			        {value: "EGY", name: "Egypt"},
			        {value: "SLV", name: "El Salvador"},
			        {value: "EST", name: "Estonia"},
			        {value: "ETH", name: "Ethiopia"},
			        {value: "FJI", name: "Fiji"},
			        {value: "FIN", name: "Finland"},
			        {value: "FRA", name: "France"},
			        {value: "GAB", name: "Gabon"},
			        {value: "GMB", name: "Gambia"},
			        {value: "GEO", name: "Georgia"},
			        {value: "DEU", name: "Germany"},
			        {value: "GHA", name: "Ghana"},
			        {value: "GRC", name: "Greece"},
			        {value: "GTM", name: "Guatemala"},
			        {value: "GIN", name: "Guinea"},
			        {value: "GNB", name: "Guinea-Bissau"},
			        {value: "GUY", name: "Guyana"},
			        {value: "HTI", name: "Haiti"},
			        {value: "HND", name: "Honduras"},
			        {value: "HKG", name: "Hong Kong"},
			        {value: "HUN", name: "Hungary"},
			        {value: "IND", name: "India"},
			        {value: "IDN", name: "Indonesia"},
			        {value: "IRN", name: "Iran"},
			        {value: "IRQ", name: "Iraq"},
			        {value: "IRL", name: "Ireland"},
			        {value: "ISR", name: "Israel"},
			        {value: "ITA", name: "Italy"},
			        {value: "CIV", name: "Ivory Coast"},
			        {value: "JAM", name: "Jamaica"},
			        {value: "JPN", name: "Japan"},
			        {value: "JOR", name: "Jordan"},
			        {value: "KAZ", name: "Kazakhstan"},
			        {value: "KEN", name: "Kenya"},
			        {value: "KGZ", name: "Kyrgyzstan"},
			        {value: "LAO", name: "Laos"},
			        {value: "LVA", name: "Latvia"},
			        {value: "LBN", name: "Lebanon"},
			        {value: "LSO", name: "Lesotho"},
			        {value: "LTU", name: "Lithuania"},
			        {value: "LUX", name: "Luxembourg"},
			        {value: "MKD", name: "Macedonia [FYROM]"},
			        {value: "MDG", name: "Madagascar"},
			        {value: "MWI", name: "Malawi"},
			        {value: "MYS", name: "Malaysia"},
			        {value: "MLI", name: "Mali"},
			        {value: "MRT", name: "Mauritania"},
			        {value: "MUS", name: "Mauritius"},
			        {value: "MEX", name: "Mexico"},
			        {value: "MDA", name: "Moldova"},
			        {value: "MNG", name: "Mongolia"},
			        {value: "MAR", name: "Morocco"},
			        {value: "MOZ", name: "Mozambique"},
			        {value: "MMR", name: "Myanmar [Burma]"},
			        {value: "NAM", name: "Namibia"},
			        {value: "NPL", name: "Nepal"},
			        {value: "NLD", name: "Netherlands"},
			        {value: "NZL", name: "New Zealand"},
			        {value: "NIC", name: "Nicaragua"},
			        {value: "NER", name: "Niger"},
			        {value: "NGA", name: "Nigeria"},
			        {value: "NOR", name: "Norway"},
			        {value: "PAK", name: "Pakistan"},
			        {value: "PAN", name: "Panama"},
			        {value: "PNG", name: "Papua New Guinea"},
			        {value: "PRY", name: "Paraguay"},
			        {value: "PER", name: "Peru"},
			        {value: "PHL", name: "Philippines"},
			        {value: "POL", name: "Poland"},
			        {value: "PRT", name: "Portugal"},
			        {value: "PRI", name: "Puerto Rico"},
			        {value: "ROU", name: "Romania"},
			        {value: "RUS", name: "Russia"},
			        {value: "RWA", name: "Rwanda"},
			        {value: "SEN", name: "Senegal"},
			        {value: "SRB", name: "Serbia"},
			        {value: "SYC", name: "Seychelles"},
			        {value: "SLE", name: "Sierra Leone"},
			        {value: "SGP", name: "Singapore"},
			        {value: "SVK", name: "Slovakia"},
			        {value: "SVN", name: "Slovenia"},
			        {value: "SOM", name: "Somalia"},
			        {value: "ZAF", name: "South Africa"},
			        {value: "KOR", name: "South Korea"},
			        {value: "ESP", name: "Spain"},
			        {value: "LKA", name: "Sri Lanka"},
			        {value: "SDN", name: "Sudan"},
			        {value: "SUR", name: "Suriname"},
			        {value: "SWE", name: "Sweden"},
			        {value: "CHE", name: "Switzerland"},
			        {value: "SYR", name: "Syria"},
			        {value: "TWN", name: "Taiwan"},
			        {value: "TJK", name: "Tajikistan"},
			        {value: "TZA", name: "Tanzania"},
			        {value: "THA", name: "Thailand"},
			        {value: "TGO", name: "Togo"},
			        {value: "TTO", name: "Trinidad and Tobago"},
			        {value: "TUN", name: "Tunisia"},
			        {value: "TUR", name: "Turkey"},
			        {value: "TKM", name: "Turkmenistan"},
			        {value: "UGA", name: "Uganda"},
			        {value: "UKR", name: "Ukraine"},
			        {value: "GBR", name: "United Kingdom"},
			        {value: "USA", name: "United States"},
			        {value: "URY", name: "Uruguay"},
			        {value: "UZB", name: "Uzbekistan"},
			        {value: "VEN", name: "Venezuela"},
			        {value: "VNM", name: "Vietnam"},
			        {value: "YEM", name: "Yemen"},
			        {value: "ZMB", name: "Zambia"},
			        {value: "ZWE", name: "Zimbabwe"}
		        ]
			},
			onInteraction: function(data) {
				var vals = getValues(data.selected);

				d3.select('svg').selectAll('path').attr('fill', function(d) {
					if(vals.indexOf(d.id) !== -1) return '#ccc';
	                else return '#f2f2f2';
	            });
			},
			onSet: function(data) {
				var vals = getValues(data.selected); console.log(">>>>>"); console.log(data);

				d3.select('svg').selectAll('path').attr('fill', function(d) {
					if(vals.indexOf(d.id) !== -1) return '#db4334';
					else return '#f2f2f2';
	            });
			}
		});

		$("#button1").click(function() {
			picker.show();
		});

		$("#button2").click(function() {
			picker.resetValue(['BRA', 'USA', 'RUS', 'IND', 'AUS']);
			picker.onSet();
		});

		function getValues(selected) {
			var vals =[];
			if(selected === undefined) return vals;
			for (var i = 0, size = selected.length; i < size; i++) {
				vals.push(selected[i].value);
			};
			return vals;
		}

		/* MAP */
	    var mapJSON = d3.json('http://vizabi-dev.gapminder.org.s3.amazonaws.com/data/bubble_map/world-countries.json', function(json) {
	        var map = d3.geo.equirectangular();
	        var path = d3.geo.path().projection(map);

	        map.scale(125);
	        map.translate([400, 250])

	        d3.select('svg').selectAll('path')
	            .data(json.features)
	            .enter()
	            .append('path')
	            .attr('d', function (d) { return path(d); })
	            .attr('fill', function(d) {
	                return '#f2f2f2';
	            });

	         picker.onSet();
	    });
	</script>

	<h3>Usage:</h3>
	<pre>
var picker = new smartPicker("mult", "my-geo-mult", {
	width: 500,
	contentData: {
		text: "Select countries",
		options: {
			...
		}
	},
	confirmButton: "Select these countries",
	onInteraction: function(data) {
		var vals = getValues(data.selected);

		d3.select('svg').selectAll('path').attr('fill', function(d) {
			if(vals.indexOf(d.id) !== -1) return '#ccc';
            else return '#f2f2f2';
        });
	},
	onSet: function(data) {
		var vals = getValues(data.selected);

		d3.select('svg').selectAll('path').attr('fill', function(d) {
			if(vals.indexOf(d.id) !== -1) return '#db4334';
			else return '#f2f2f2';
        });
	}
});
picker.show();</pre>

	<hr/>
	<p><a  id="menu_test">Menu</a></p>


	<script type="text/javascript" src="menu.js"></script>

</body>
</html>